(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23d422c6"],{a15b:function(e,t,l){"use strict";var a=l("23e7"),i=l("44ad"),o=l("fc6a"),s=l("a640"),r=[].join,n=i!=Object,c=s("join",",");a({target:"Array",proto:!0,forced:n||!c},{join:function(e){return r.call(o(this),void 0===e?",":e)}})},a3a8:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticStyle:{display:"flex"}},[l("el-input",{staticClass:"input_search",attrs:{placeholder:"请输入电影名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getUser(t)}},model:{value:e.xxName,callback:function(t){e.xxName=t},expression:"xxName"}}),l("el-input",{staticClass:"input_search",attrs:{placeholder:"请输入电影标识",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getUser(t)}},model:{value:e.xxType,callback:function(t){e.xxType=t},expression:"xxType"}}),l("el-button",{staticStyle:{margin:"15px 0 15px 20px"},attrs:{icon:"el-icon-search",type:"primary"},on:{click:function(t){return e.getUser(1)}}},[e._v("查询")]),l("el-button",{staticStyle:{display:"flex",margin:"15px 0 15px 20px"},attrs:{type:"success"},on:{click:e.add}},[e._v("添加电影")]),l("el-button",{staticStyle:{display:"flex",margin:"15px 0 15px 20px"},attrs:{type:"primary"},on:{click:e.edit}},[e._v("修改电影")]),l("el-button",{staticStyle:{display:"flex",margin:"15px 0 15px 20px"},attrs:{type:"danger"},on:{click:e.deletes}},[e._v("删除电影")])],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",attrs:{data:e.Tabledata,height:e.tableHeight},on:{"row-click":e.handleClickRow,"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"50"}}),l("el-table-column",{attrs:{prop:"xxId",label:"电影id"}}),l("el-table-column",{attrs:{prop:"xxName",label:"电影名称"}}),l("el-table-column",{attrs:{prop:"xxType",label:"电影标识"}}),l("el-table-column",{attrs:{label:"电影海报",prop:"xxImg"},scopedSlots:e._u([{key:"default",fn:function(e){return[l("el-popover",{attrs:{placement:"right",title:"",trigger:"hover"}},[l("el-image",{staticStyle:{"max-height":"100px","max-width":"100px"},attrs:{slot:"reference",src:e.row.xxImg,alt:e.row.xxImg},slot:"reference"}),l("img",{attrs:{src:e.row.xxImg}})],1)]}}])})],1),l("el-pagination",{staticStyle:{display:"flex",margin:"20px 0 0 20px"},attrs:{layout:"total,prev, pager, next,jumper",total:e.Tabletotal,"page-size":20,"current-page":e.currentPage},on:{"current-change":e.currentChange}}),l("el-dialog",{attrs:{visible:e.dialogVisible,width:"60%",title:e.dialogTitle},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("div",{staticStyle:{display:"flex","font-size":"16px"}},[l("h3",[e._v("详细信息")])]),l("div",[l("el-form",{ref:"form",staticClass:"form1",attrs:{model:e.form,"label-width":"120px","label-position":"right"}},[l("el-form-item",{attrs:{label:"电影名称:",prop:"xxName",rules:e.FormRules}},[l("el-input",{staticClass:"elinput",attrs:{placeholder:"请输入电影名称"},model:{value:e.form.xxName,callback:function(t){e.$set(e.form,"xxName",t)},expression:"form.xxName"}})],1),l("el-form-item",{attrs:{label:"电影id:",prop:"xxId",rules:e.FormRules}},[l("el-input-number",{staticClass:"elinput",attrs:{step:1,controls:!1,placeholder:"请输入电影id"},model:{value:e.form.xxId,callback:function(t){e.$set(e.form,"xxId",t)},expression:"form.xxId"}})],1),l("el-form-item",{attrs:{label:"电影海报:",prop:"xxImg",rules:e.FormRules}},[l("el-input",{staticClass:"elinput",attrs:{placeholder:"请输入电影海报URL"},model:{value:e.form.xxImg,callback:function(t){e.$set(e.form,"xxImg",t)},expression:"form.xxImg"}})],1),l("el-form-item",{attrs:{label:"电影种类:",prop:"xxType",rules:e.FormRules}},[l("el-input",{staticClass:"elinput",attrs:{placeholder:"请输入电影种类"},model:{value:e.form.xxType,callback:function(t){e.$set(e.form,"xxType",t)},expression:"form.xxType"}})],1)],1),l("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)]),l("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible2,width:"30%"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[l("span",[e._v("确定删除吗")]),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.confirm2}},[e._v("确 定")])],1)])],1)},i=[],o=(l("99af"),l("4160"),l("a15b"),l("159b"),l("5530")),s=l("4aca"),r={mixins:[s["a"]],data:function(){return{Tabledata:[],Tabletotal:1,currentPage:1,loading:!1,xxName:"",xxType:"",dialogTitle:"",dialogVisible:!1,dialogVisible2:!1,form:{xxName:"",xxId:"",xxImg:"",xxType:""}}},computed:{},created:function(){this.getUser()},methods:{currentChange:function(e){this.currentPage=e,this.getUser(e)},getUser:function(e){var t=this;console.log(e),this.loading=!0,this.$utils.http.call(this,{url:"/?s=App.Table.FreeQuery",parameter:{page:e||1,perpage:20,model_name:"xxMovie",where:'[["id", ">", "0"],["xxName", "LIKE", "'.concat(this.xxName,'"],["xxType", "LIKE", "').concat(this.xxType,'"]]')},success:function(l){t.loading=!1,1==e&&(t.currentPage=1),t.Tabledata=l.data.data.list,t.Tabletotal=l.data.data.total}})},add:function(){this.form.xxName="",this.form.xxId="",this.form.xxImg="",this.form.xxType="",this.dialogVisible=!0,this.dialogTitle="添加电影"},edit:function(){var e=this,t=this.multipleSelection;this.limit(t,(function(){e.setData(t,"form",(function(){console.log(t),e.dialogVisible=!0,e.dialogTitle="修改电影"}))}))},deletes:function(){var e=this.multipleSelection;if(0==e.length)return this.$message.warning("至少选择一条数据");this.dialogVisible2=!0},confirm2:function(){var e=this,t=this.multipleSelection,l=[];t.forEach((function(e,t,a){l.push(e.id)})),this.$utils.http.call(this,{url:"/?s=App.Table.MultiDelete",parameter:{model_name:"xxMovie",ids:l.join(",")},success:function(t){e.$message.success("操作成功"),e.dialogVisible2=!1,e.getUser(e.currentPage)}})},confirm:function(){var e=this,t={xxName:this.form.xxName,xxId:this.form.xxId,xxImg:this.form.xxImg,xxType:this.form.xxType},l="",a={};l="添加电影"==this.dialogTitle?"/?s=App.Table.Create":"/?s=App.Table.Update",a="添加电影"==this.dialogTitle?{model_name:"xxMovie",data:JSON.stringify(t)}:{model_name:"xxMovie",id:this.multipleSelection[0].id,data:JSON.stringify(t)},this.$utils.http.call(this,{url:l,parameter:Object(o["a"])({},a),success:function(t){e.$message.success("操作成功"),e.dialogVisible=!1,e.getUser(e.currentPage),e.$refs.form.resetFields()}})}}},n=r,c=l("2877"),x=Object(c["a"])(n,a,i,!1,null,null,null);t["default"]=x.exports}}]);
//# sourceMappingURL=chunk-23d422c6.888b4fe3.js.map